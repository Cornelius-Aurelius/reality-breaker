<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reality Breaker ∞</title>

<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
        touch-action: manipulation;
        font-family: Arial, sans-serif;
    }

    canvas {
        position: absolute;
        top: 0; left: 0;
        width: 100vw;
        height: 100vh;
    }

    #ui {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        color: cyan;
        font-size: 1.5rem;
        text-shadow: 0 0 20px #0ff;
        font-weight: bold;
        z-index: 20;
        text-align: center;
        pointer-events: none;
    }

    #bigMessage {
        position: fixed;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        font-size: 3rem;
        color: #0ff;
        text-shadow: 0 0 30px #0ff;
        display: none;
        z-index: 30;
        text-align: center;
    }

    #restartBtn {
        padding: 10px 25px;
        font-size: 1.2rem;
        background: #0ff;
        color: #000;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        margin-top: 20px;
        display: none;
    }

    footer {
        position: fixed;
        bottom: 10px;
        width: 100%;
        text-align: center;
        color: #0ff;
        font-size: 0.9rem;
        opacity: .7;
        z-index: 50;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="ui">
    Score: <span id="score">0</span><br>
    Combo: <span id="combo">0</span>
</div>

<div id="bigMessage">
    <span id="messageText"></span><br>
    <button id="restartBtn" onclick="startGame()">PLAY AGAIN</button>
</div>

<footer>
    CORNELIUS AURELIUS — 
    <a href="https://zenodo.org/records/17362534" target="_blank" style="color:#0ff;">Zenodo Peace</a>
</footer>

<script>
/*============================
    REALITY BREAKER ∞ ENGINE
=============================*/

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let W, H;
function resize() {
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
}
resize();
window.onresize = resize;

const symbols = ["Ω", "Ψ", "Φ", "∇", "∞", "λ", "✦", "✧", "⟡", "⟠", "⚡", "✩"];

let entities = [];
let particles = [];
let score = 0;
let combo = 0;
let missed = 0;
let spawnRate = 900;
let chaosMode = false;
let gameRunning = true;

function rand(min, max) { return Math.random() * (max - min) + min; }

/*============================
      PARTICLE EFFECTS
=============================*/
function spawnParticles(x, y, color) {
    for (let i = 0; i < 25; i++) {
        particles.push({
            x, y,
            vx: rand(-3, 3),
            vy: rand(-3, 3),
            life: rand(20, 40),
            color
        });
    }
}

/*============================
         ENTITY SPAWNER
=============================*/
function spawnSymbol() {
    if (!gameRunning) return;

    const size = rand(35, 70);
    const x = rand(50, W - 50);
    const y = rand(50, H - 50);
    
    entities.push({
        x, y,
        size,
        text: symbols[Math.floor(Math.random() * symbols.length)],
        life: Date.now(),
        color: "cyan"
    });

    spawnRate = Math.max(250, spawnRate - 10);

    setTimeout(spawnSymbol, spawnRate);
}

/*============================
         TAP DETECTOR
=============================*/
canvas.onclick = function(e) {
    if (!gameRunning) return;

    const rect = canvas.getBoundingClientRect();
    const mx = e.clientX - rect.left;
    const my = e.clientY - rect.top;

    for (let i = entities.length - 1; i >= 0; i--) {
        let s = entities[i];
        let dx = mx - s.x;
        let dy = my - s.y;
        if (Math.hypot(dx, dy) < s.size) {

            // score + combo logic
            score++;
            combo++;
            document.getElementById("score").textContent = score;
            document.getElementById("combo").textContent = combo;

            // special: CHAOS MODE unlock
            if (combo > 15 && !chaosMode) chaosModeOn();

            spawnParticles(s.x, s.y, s.color);

            if (navigator.vibrate) navigator.vibrate(20);

            entities.splice(i, 1);
            return;
        }
    }

    // miss penalty
    combo = 0;
    document.getElementById("combo").textContent = combo;
};

/*============================
         CHAOS MODE ∞
=============================*/
function chaosModeOn() {
    chaosMode = true;
    spawnRate = 200;

    message("CHAOS MODE ∞");

    setTimeout(() => chaosMode = false, 8000);
}

/*============================
       GAME OVER CONTROL
=============================*/
function gameOver() {
    gameRunning = false;
    message("REALITY COLLAPSED");
    document.getElementById("restartBtn").style.display = "inline-block";
}

/*============================
      SHOW BIG MESSAGE
=============================*/
function message(txt) {
    const box = document.getElementById("bigMessage");
    document.getElementById("messageText").textContent = txt;
    box.style.display = "block";

    setTimeout(() => { if (gameRunning) box.style.display = "none"; }, 1500);
}

/*============================
           RENDER LOOP
=============================*/
function draw() {
    ctx.clearRect(0, 0, W, H);

    // symbols
    entities.forEach((s, i) => {
        ctx.fillStyle = s.color;
        ctx.font = `${s.size}px Arial`;
        ctx.textAlign = "center";
        ctx.shadowBlur = 20;
        ctx.shadowColor = s.color;
        ctx.fillText(s.text, s.x, s.y);

        // lifetime
        if (Date.now() - s.life > 1500) {
            entities.splice(i, 1);
            combo = 0;
            document.getElementById("combo").textContent = combo;
            missed++;

            if (missed >= 3) gameOver();
        }
    });

    // particles
    particles.forEach((p, i) => {
        p.x += p.vx;
        p.y += p.vy;
        p.life--;
        ctx.fillStyle = p.color;
        ctx.globalAlpha = Math.max(0, p.life / 40);
        ctx.fillRect(p.x, p.y, 4, 4);
        ctx.globalAlpha = 1.0;
        if (p.life <= 0) particles.splice(i, 1);
    });

    requestAnimationFrame(draw);
}

/*============================
          START GAME
=============================*/
function startGame() {
    // reset everything
    score = 0;
    combo = 0;
    missed = 0;
    spawnRate = 900;
    entities = [];
    particles = [];
    chaosMode = false;
    gameRunning = true;

    document.getElementById("score").textContent = 0;
    document.getElementById("combo").textContent = 0;

    document.getElementById("bigMessage").style.display = "none";
    document.getElementById("restartBtn").style.display = "none";

    spawnSymbol();
}

draw();
startGame();

</script>
</body>
</html>
