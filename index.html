<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<title>Reality Breaker ∞ Chromebook Edition</title>

<style>
body{
 margin:0;background:black;color:#0ff;overflow:hidden;
 font-family:Arial, sans-serif;touch-action:manipulation;
}
canvas{position:absolute;top:0;left:0;width:100%;height:100%}
#ui{
 position:fixed;top:10px;left:50%;transform:translateX(-50%);
 font-size:1.4rem;text-shadow:0 0 18px #0ff;z-index:50;
 text-align:center;pointer-events:none;
}
#big{
 position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
 font-size:3rem;color:#0ff;text-shadow:0 0 40px #0ff;
 display:none;z-index:60;text-align:center;
}
#big button{
 margin-top:20px;padding:12px 25px;
 font-size:1.3rem;background:#0ff;color:#000;
 border:none;border-radius:10px;cursor:pointer;
}
footer{
 position:fixed;bottom:10px;width:100%;text-align:center;
 color:#0ff;font-size:0.9rem;opacity:.7;z-index:70;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="ui">
Score: <span id="s">0</span> |
Combo: <span id="c">0</span> |
Power: <span id="p">0%</span><br>
Rank: <span id="r">F</span> |
Wave: <span id="w">1</span> |
High Score: <span id="hs">0</span>
</div>

<div id="big">
 <span id="msg"></span><br>
 <button onclick="start()">PLAY AGAIN</button>
</div>

<footer>
Created by CORNELIUS AURELIUS —
<a href="https://zenodo.org/records/17362534" target="_blank" style="color:#0ff;">Zenodo Peace</a>
</footer>

<script>
/* ============== NO AUDIO VERSION — SAFE ON CHROMEBOOKS ============== */

const cv=document.getElementById("game"), ctx=cv.getContext("2d");
let W,H; function resize(){W=cv.width=innerWidth;H=cv.height=innerHeight;} resize();
onresize=resize;

let symbols="ΩΨΦ∇∞λ✦✧⟡⟠⚡✩";

let ents=[], parts=[], trails=[];
let score=0, combo=0, power=0, wave=1, miss=0;
let spawnRate=900, difficulty=1;
let slow=false, shield=false;
let gameRunning=true;
let boss=null;

/* LocalStorage High Score */
let hs=localStorage.rbhs ? +localStorage.rbhs : 0;
document.getElementById("hs").textContent=hs;

/* Safe SFX Stub (does nothing, avoids crashes) */
function SFX(freq){}

/* Helpers */
function rand(a,b){return Math.random()*(b-a)+a;}

function addParticles(x,y){
 for(let i=0;i<40;i++){
  parts.push({x,y,vx:rand(-4,4),vy:rand(-4,4),life:rand(20,35)});
 }
}

function spawn(){
 if(!gameRunning) return;

 ents.push({
  x:rand(100,W-100),
  y:rand(150,H-150),
  size:rand(40,80),
  t:symbols[Math.random()*symbols.length|0],
  born:Date.now()
 });

 spawnRate=Math.max(200,spawnRate-3*difficulty);
 setTimeout(spawn, slow ? spawnRate*1.5 : spawnRate);
}

function spawnBoss(){
 if(boss) return;
 boss={x:W/2,y:H/2,size:160,hp:30+difficulty*10};
}

function updateUI(){
 document.getElementById("s").textContent=score;
 document.getElementById("c").textContent=combo;
 document.getElementById("p").textContent=power+"%";
 document.getElementById("w").textContent=wave;
}

function gameOver(){
 gameRunning=false;
 document.getElementById("msg").textContent="REALITY COLLAPSED";
 document.getElementById("big").style.display="block";
 if(score>hs){localStorage.rbhs=score;}
}

cv.onclick=function(e){
 if(!gameRunning)return;

 const rect=cv.getBoundingClientRect();
 const mx=e.clientX-rect.left, my=e.clientY-rect.top;

 /* Boss */
 if(boss){
  if(Math.hypot(mx-boss.x,my-boss.y)<boss.size){
   boss.hp--; addParticles(boss.x,boss.y);
   if(boss.hp<=0){
    score+=50; boss=null;
   }
   updateUI();
   return;
  }
 }

 /* Entities */
 for(let i=ents.length-1;i>=0;i--){
  let s=ents[i];
  if(Math.hypot(mx-s.x,my-s.y)<s.size){
   score++; combo++;

   if(score%20===0){wave++;difficulty+=0.15;}
   if(combo%18===0) spawnBoss();

   addParticles(s.x,s.y);
   ents.splice(i,1);
   updateUI();
   return;
  }
 }

 combo=0; updateUI();
 miss++; if(miss>=5) gameOver();
};

function draw(){
 ctx.clearRect(0,0,W,H);

 /* Background vortex */
 let t=Date.now()*0.00025;
 for(let i=0;i<70;i++){
  ctx.beginPath();
  ctx.strokeStyle=`hsla(${(i*7+t*180)%360},100%,50%,0.04)`;
  ctx.arc(W/2,H/2,i*22,0,Math.PI*2);
  ctx.stroke();
 }

 /* Entities */
 ents.forEach((s,i)=>{
  ctx.font=`${s.size}px Arial`;
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.shadowBlur=25;
  ctx.shadowColor="#0ff";
  ctx.fillStyle="#0ff";
  ctx.fillText(s.t,s.x,s.y);

  if(Date.now()-s.born > (slow?3000:1500)){
   ents.splice(i,1);
   combo=0; miss++; updateUI();
   if(miss>=5) gameOver();
  }
 });

 /* Boss */
 if(boss){
  ctx.font=`${boss.size}px Arial`;
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.shadowBlur=40;
  ctx.shadowColor="#0ff";
  ctx.fillStyle="#0ff";
  ctx.fillText("⟠",boss.x,boss.y);

  ctx.fillStyle="#0ff";
  ctx.fillRect(boss.x-80,boss.y+boss.size,160*(boss.hp/(30+difficulty*10)),10);
 }

 /* Particles */
 parts.forEach((p,i)=>{
  ctx.globalAlpha=p.life/35;
  ctx.fillStyle="#0ff";
  ctx.fillRect(p.x,p.y,4,4);
  ctx.globalAlpha=1;
  p.x+=p.vx; p.y+=p.vy; p.life--;
  if(p.life<=0) parts.splice(i,1);
 });

 requestAnimationFrame(draw);
}

function start(){
 ents=[];parts=[];boss=null;
 score=0;combo=0;power=0;wave=1;miss=0;
 gameRunning=true; spawnRate=900; difficulty=1;

 document.getElementById("big").style.display="none";
 updateUI();
 setTimeout(()=>spawn(),200);
}

draw();
setTimeout(()=>start(),300);
</script>

</body>
</html>
